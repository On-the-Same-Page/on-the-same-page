<h1 class="no-show">On the Same Page</h1>
<div class="top controls">
    <div class="main-content-wrapper">
        <div class="main-content">
            <select [ngModel]="yAxisVariable" (ngModelChange)="yAxisVariableChanged($event)">
                <option value="initial" disabled="">Select a variable for the Y axis!</option>
                <option value="numPages">Number of pages</option>
                <option value="avgRating">Average rating</option>
                <option value="ratingsCount">Number of ratings</option>
                <option value="year_publication">Publication year</option>
            </select>
        </div>
    </div>
    <div class="genre-buttons-container">
        <otsp-genre-button *ngFor="let genre of GENRE_LIST"
                           [matTooltip]="genre"
                           [genre]="genre"
                           [selected]="genreFilter === genre"
                           (genreSelected)="toggleGenre(genre)"></otsp-genre-button>
    </div>
    <div class="tail-end">
        <div class="search-input" (click)="searchInput.focus()">
            <mat-icon>search</mat-icon>
            <input #searchInput type="text" placeholder="Search..."
                   [ngModel]="searchText"
                   (ngModelChange)="changeSearchText($event)">
            <mat-icon *ngIf="searchText" (click)="changeSearchText('')">clear</mat-icon>
        </div>
    </div>
</div>

<div class="main-view">
    <svg #mainChart></svg>
    <div class="sidebar">
        <div class="sidebar-filter">

            <p class="sidebar-filter-title">Publication year</p>

            <otsp-range-slider (maxChanged)="changeYearMax($event)"
                               (minChanged)="changeYearMin($event)"
                               [step]="10"
                               [lowerBound]="yearLowerBound"
                               [upperBound]="yearUpperBound">
            </otsp-range-slider>
        </div>

        <div class="sidebar-filter">

            <p class="sidebar-filter-title">Number of ratings</p>

            <otsp-range-slider (maxChanged)="changeRatingsCountMax($event)"
                               (minChanged)="changeRatingsCountMin($event)"
                               [color]="'#673AB7'"
                               [lowerBound]="ratingsCountLowerBound"
                               [upperBound]="ratingsCountUpperBound">
            </otsp-range-slider>
        </div>

        <div class="sidebar-filter">

            <p class="sidebar-filter-title">Number of pages</p>

            <otsp-range-slider (maxChanged)="changeNumPagesMax($event)"
                               (minChanged)="changeNumPagesMin($event)"
                               [color]="'#5AC1BB'"
                               [lowerBound]="numPagesLowerBound"
                               [upperBound]="numPagesUpperBound">
            </otsp-range-slider>
        </div>

        <div class="sidebar-filter">

            <p class="sidebar-filter-title">Average rating</p>

            <otsp-range-slider (maxChanged)="changeAvgRatingMax($event)"
                               (minChanged)="changeAvgRatingMin($event)"
                               [color]="'#FFA3FD'"
                               [step]="0.01"
                               [lowerBound]="avgRatingLowerBound"
                               [upperBound]="avgRatingUpperBound">
            </otsp-range-slider>
        </div>
        <!-- <otsp-range-slider (maxChanged)="placeHolderMethod($event)" [lowerBound]="0" [upperBound]="1500">

         </otsp-range-slider>
         <otsp-range-slider (maxChanged)="placeHolderMethod($event)" [lowerBound]="0" [upperBound]="6000">

         </otsp-range-slider> -->
    </div>
</div>

<div class="bottom controls">
    <div class="force-button" [class.active]="forceEnabled" (click)="toggleForce()">
        <span>Use the force!</span>
        <img class="force-icon" src="assets/img/force.png">
    </div>
    <select [ngModel]="xAxisVariable" (ngModelChange)="xAxisVariableChanged($event)" >
        <option value="initial" disabled="">Select a variable for the X axis!</option>
        <option value="numPages">Number of pages</option>
        <option value="avgRating">Average rating</option>
        <option value="ratingsCount">Number of ratings</option>
        <option value="year_publication">Publication year</option>
    </select>
</div>

<div *ngIf="tooltipBookDetailed$ | async" class="overlay" (click)="tooltipBookDetailed$.next(null)">
</div>

<otsp-book-tooltip *ngIf="tooltipBook$ | async"
    [book]="tooltipBook$ | async"
    [xAxisVariable]="xAxisVariable"
    [yAxisVariable]="yAxisVariable">
</otsp-book-tooltip>

<otsp-book-tooltip-detailed *ngIf="tooltipBookDetailed$ | async"
    [book]="tooltipBookDetailed$ | async"
    [xAxisVariable]="xAxisVariable"
    [yAxisVariable]="yAxisVariable">
</otsp-book-tooltip-detailed>
